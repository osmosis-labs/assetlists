# Osmosis Assetlists

## Description

This repository generates asset and chain information for the [Osmosis Zone](https://app.osmosis.zone) frontend. It uses the [Cosmos Chain Registry](https://github.com/cosmos/chain-registry) as the source of truth for asset metadata, then layers Osmosis-specific configurations on top:

- **Reliable Endpoints** - Curated RPC/REST endpoints with validation and health monitoring
- **Transfer Methods** - Custom transfer configurations for assets requiring special handling
- **Verification Status** - Asset verification flags based on [listing criteria](LISTING.md)
- **Categories** - Asset categorization (DeFi, meme tokens, etc.) for frontend filtering
- **Property Overrides** - Osmosis-specific display properties when needed

The generated files power the Osmosis Zone interface, providing wallet integration, asset discovery, and chain connectivity information. Asset metadata (logos, descriptions, social links) comes from Chain Registry and is automatically updated during scheduled runs.

## Prerequisite: Chain Registry Registration

**The Cosmos Chain Registry is the source of truth for all asset metadata.** Assets are automatically listed on Osmosis once properly registered in Chain Registry.

### Submission Workflow

1. **Submit PR to Chain Registry** - Register your chain and asset at the [Cosmos Chain Registry](https://github.com/cosmos/chain-registry)
   - Include complete asset metadata (name, symbol, logo, description, etc.)
   - Register IBC connection information between your chain and Osmosis (if applicable)
   - Follow the [Chain Registry contribution guide](https://docs.osmosis.zone/overview/integrate/registration)

2. **Wait for Chain Registry PR to be merged** - Once your PR is approved and merged into Chain Registry

3. **Automatic Generation** - Automated runs in this repo occur twice weekly (Mondays and Thursdays at 09:00 UTC) and will:
   - Pull latest Chain Registry data
   - Automatically detect new assets with IBC connections to Osmosis
   - Generate assetlists with your complete metadata from Chain Registry
   - Make your asset visible on Osmosis frontend
   - Can also be triggered manually by maintainers

4. **Optional: Add Zone Configuration** - Add an entry to `osmosis.zone_assets.json` in this repository:
   - Set asset categories (`"defi"`, `"meme"`, etc.)
   - Request verified status (`osmosis_verified: true` - requires meeting [verification criteria](LISTING.md))
   - Configure custom transfer methods or property overrides
   - **Note:** This step is NOT required for basic asset listing - assets are automatically included based on Chain Registry data

**Important:** All asset metadata (images, descriptions, social links, etc.) comes from Chain Registry. To update asset information, submit PRs to Chain Registry, not this repository. Changes will be automatically picked up during the next automated run (twice weekly).

## Repository Structure

This repository contains several types of files organized by chain:

### Input Files (Zone Configuration)
These files are manually maintained and serve as input for automated generation:
- **`osmosis.zone_assets.json`** - Configuration for assets to be listed on Osmosis Zone. Add new assets here.
- **`osmosis.zone_chains.json`** - Configuration for chains to be supported on Osmosis Zone. Includes RPC/REST endpoints, explorers, and chain-specific settings.
- **`osmosis.zone_config.json`** - General configuration and settings for the zone.

### Generated Files
These files are automatically generated by GitHub Actions and should not be edited manually:
- **`generated/frontend/assetlist.json`** - Asset list formatted for Osmosis Zone frontend consumption
- **`generated/frontend/chainlist.json`** - Chain list formatted for Osmosis Zone frontend, including wallet integration metadata
- **`generated/chain-registry/assetlist.json`** - Asset list in Cosmos Chain Registry format
- **`generated/external/`** - Integration files for external services (CoinGecko, Mintscan)
- **`generated/asset_detail/`** - Detailed metadata for individual assets including pricing, related assets, and counterparty information
- **`state/`** - Tracks asset state information such as listing status, warnings, and historical data

### Directory Structure
```
osmosis-1/                    # Mainnet configuration
  ├── osmosis.zone_assets.json
  ├── osmosis.zone_chains.json
  ├── osmosis.zone_config.json
  ├── state/
  └── generated/
      ├── frontend/
      ├── chain-registry/
      ├── external/
      └── asset_detail/

osmo-test-5/                  # Testnet configuration
  └── (same structure as mainnet)
```

## Zone Asset Configuration (Optional)

**Note:** Adding assets to `osmosis.zone_assets.json` is optional. Assets with IBC connections to Osmosis are automatically detected and listed from Chain Registry. Only add zone configuration if you need categories, verification status, or custom overrides.

Please see the asset [listing requirements](https://github.com/osmosis-labs/assetlists/blob/main/LISTING.md) for information about verification and display requirements on Osmosis Zone.

To configure zone-specific properties, add an asset object to the very bottom of the _osmosis.zone_assets.json_ file with these identifying details:
- `base_denom` is the minimal/indivisible (i.e., exponent: 0) denomination unit for the asset, corresponding to its `base` at the Chain Registry.
- `chain_name` must be the exact value defined as `chain_name` in the chain's _chain.json_ file at the Chain Registry.
- `path` is required for all ics20 assets (i.e., assets that are transferred to Osmosis from another chain via IBC); the only exception are asset deployed directly on Osmosis (e.g., factory tokens). It is comprised of: the destination IBC port and channel for each IBC hop, followed by the base denom on the IBC-originating chain. The is used as input into the SHA256 hash function.
  - e.g., `"path": "transfer/channel-0/uatom"`
- `osmosis_verified` should always be set to `false` upon initial listing; this indicates whether the 'Unverified Assets' setting must be toggled to reveal the asset on Osmosis Zone. After meeting the requirements described in the listing requirements page, an additional PR may created to set it to `true`.

There are also some additional details that may be defined for an asset:
- `transfer_methods` should be included whenever a basic IBC transfer initiated via Osmosis Zone Deposit and Withdraw buttons is unable to carry-out an interchain transfer.
- `override_properties` may be defined for cases where Osmosis Zone shall display the asset differently than how registered on its source chain.
- `canonical` shall be defined for assets that are Osmosis' canonical representation of an asset different than its source (e.g., Axelar's WETH(.axl) is Osmosis' canonical representation of Ether $ETH on Osmosis)
- `categories` are best manually defined for an asset, including: "defi" and "meme".

## Chains

### Automatic Chain Inclusion

**You typically don't need to manually add chains.** When you add an asset to `osmosis.zone_assets.json`, the automated generation process will:
1. Detect the asset's origin chain from Chain Registry
2. Automatically include that chain in the generated chainlist
3. Fetch all necessary chain metadata from Chain Registry
4. Generate wallet-compatible chain configuration

This means chains are automatically added as counterparty chains whenever their assets are listed.

### Manual Chain Configuration (Optional)

You only need to manually configure a chain in `osmosis.zone_chains.json` if you want to:
- Provide custom/reliable RPC and REST endpoints
- Override default Chain Registry properties
- Add a chain before any of its assets are listed
- Configure chain-specific features or settings

**To manually add or update a chain**, add/modify a chain object in `osmosis.zone_chains.json`:

**Required Fields (for manual configuration):**
- `chain_name` - Must match exactly the `chain_name` in the Chain Registry
- `rpc` - A reliable RPC endpoint URL for the chain
- `rest` - A reliable REST API endpoint URL for the chain
- `explorer_tx_url` - URL template for transaction explorer (e.g., `https://www.mintscan.io/osmosis/txs/{txHash}`)

**Optional Fields:**
- `keplr_features` - Array of feature flags for Keplr wallet (e.g., `["ibc-go", "cosmwasm"]`)
- `override_properties` - Override specific chain properties from Chain Registry:
  - `pretty_name` - Display name
  - `status` - Chain status (e.g., "live", "upcoming")
  - `network_type` - Network type (e.g., "mainnet", "testnet")
  - `bech32_prefix` - Address prefix
  - `fees` - Custom fee configuration
  - `images` - Custom chain logo
  - `force_rpc` - Boolean flag to force using ONLY the zone-specified RPC endpoint (ignores Chain Registry endpoints)
  - `force_rest` - Boolean flag to force using ONLY the zone-specified REST endpoint (ignores Chain Registry endpoints)
- `outage` - Boolean flag to indicate if chain is experiencing an outage

**Example Chain Object:**
```json
{
  "chain_name": "cosmoshub",
  "rpc": "https://rpc.cosmos.directory/cosmoshub",
  "rest": "https://rest.cosmos.directory/cosmoshub",
  "explorer_tx_url": "https://www.mintscan.io/cosmos/txs/{txHash}",
  "keplr_features": ["ibc-go"],
  "_comment": "Cosmos Hub"
}
```

**Example Chain Object with Endpoint Override:**
```json
{
  "chain_name": "stride",
  "rpc": "https://stride-rpc.polkachu.com/",
  "rest": "https://stride-api.polkachu.com/",
  "explorer_tx_url": "https://explorer.stride.zone/stride/tx/${txHash}",
  "keplr_features": ["ibc-go"],
  "override_properties": {
    "force_rest": true
  },
  "_comment": "Force using only the specified REST endpoint, ignoring Chain Registry backups"
}
```

### Endpoint Override Behavior

By default, when you specify `rpc` or `rest` endpoints in your chain configuration:
1. Your zone-specified endpoint is placed **first** in the endpoint list
2. Chain Registry endpoints are added as **backups**
3. The validation algorithm may automatically reorder endpoints based on health checks

To ensure **only** your specified endpoint is used (no Chain Registry backups):
- Set `"force_rpc": true` in `override_properties` to use only your RPC endpoint
- Set `"force_rest": true` in `override_properties` to use only your REST endpoint

This is useful when:
- You have a highly reliable endpoint that doesn't need backups
- You want to prevent the validation algorithm from testing or using alternative endpoints
- Chain Registry endpoints are experiencing issues

## Zone Example

An example asset object in `osmosis.zone_assets.json`:

```
{
  "base_denom": "uosmo",
  "chain_name": "osmosis",
  "osmosis_verified": true,
  "_comment": "Osmosis $OSMO"
},
...
{
  "base_denom": "ustk",
  "chain_name": "steakchain",
  "path": "transfer/channel-69/ustk",
  "osmosis_verified": true,
  "_comment": "Steak $STK"
},
{
  "base_denom": "ufoocoin",
  "chain_name": "fubarchain",
  "path": "transfer/channel-420/ufoocoin",
  "osmosis_verified": false,
  "osmosis_unlisted": true,
  "_comment": "Foocoin $FOO"
}
```

## Dependencies

Note that there are apps, interfaces, and tools that look at this repository as a data dependency:
- Osmosis Zone app (app.osmosis.zone):
  - .../generated/frontend/assetlist.json
  - .../generated/frontend/chainlist.json
- Osmosis Labs' Sidecar Query Service (SQS):
  - .../generated/frontend/assetlist.json
- Numia Data Services (e.g., API):
  - .../generated/frontend/assetlist.json
  - .../generated/chain-registry/assetlist.json

## How It Works

### Automated Generation Process

This repository uses GitHub Actions workflows to automatically generate and validate files:

**Scheduled Generation** (Twice weekly: Mondays and Thursdays at 09:00 UTC):
The `Generate All Files` bundle workflow runs automatically and includes:
- Updates the chain-registry submodule to the latest version
- Validates RPC/REST endpoints (7 endpoints per run for performance)
- Generates assetlist files in multiple formats
- Generates chainlist files with wallet integration metadata
- Updates asset state
- Generates comments for zone assets
- Runs localization for multi-language support
- Creates a pull request with all updates to the `update/assetlist_all` branch

**Manual Workflows** (Not included in bundle):
Individual generation workflows can be triggered manually via GitHub Actions:
- `Generate Assetlist` - Regenerate asset lists only
- `Generate Chainlist` - Regenerate chain lists only
- `Generate CoinGecko` - Update CoinGecko integration (standalone)
- `Generate Mintscan` - Update Mintscan integration (standalone)
- `Localization` - Update translations

**Note on Pool Pricing:** Pool-based pricing functionality (`getPools.mjs`) exists in the codebase but is currently disabled via the `getPools = false` flag in `generate_assetlist.mjs`. This code includes pool querying, asset pricing calculations, and routing logic. It was previously used to add pricing information to generated assetlists but is not currently active. The code remains available for future re-implementation if needed.

### Pull Request Workflow

1. **Submit Changes**: Create a PR with additions/updates to `osmosis.zone_assets.json` or `osmosis.zone_chains.json`
2. **Validation**: Automated checks run to validate your changes
   - Zone file validation
   - Asset data validation
   - Endpoint health checks (for chains)
3. **Review**: Maintainers review the PR
4. **Merge**: Once approved, changes are merged
5. **Auto-Generation**: Generated files are automatically updated on the next scheduled run or manual trigger

### Validation Workflows

Several validation workflows help maintain data quality:
- **Validate Zone Assets** - Checks asset configurations are valid and complete
- **Validate Zone Chains** - Verifies chain configurations and endpoint availability
- **Validate Zone Data** - Cross-validates data against Chain Registry
- **Check Verification Criteria** - Evaluates if assets meet verification requirements (check workflow logs for results)

## Asset Verification

Assets in this repository can have two verification states:

### Unverified Assets
- Default state for newly added assets (`osmosis_verified: false`)
- Visible only when "Show Unverified Assets" toggle is enabled in Osmosis Zone
- Minimal requirements:
  - Complete Chain Registry registration
  - Valid zone asset configuration
  - Basic asset metadata (name, symbol, logo)

### Verified Assets
Assets can be upgraded to verified status (`osmosis_verified: true`) after meeting comprehensive requirements. See [LISTING.md](https://github.com/osmosis-labs/assetlists/blob/main/LISTING.md) for complete criteria.

**Key Requirements Summary:**
- Complete asset metadata including `description` and `extended_description`
- Social links (website, Twitter)
- Square logo image < 250 KB
- Minimum liquidity on Osmosis (≥$1,000 in pools)
- Market depth requirements (2% depth of $50)
- Validation by Osmosis Zone maintainers

**Automated Verification Checks:**
The `Check Verification Criteria` workflow automatically evaluates assets against verification requirements. To view verification status:
1. Go to the [Actions tab](https://github.com/osmosis-labs/assetlists/actions)
2. Select the "Check Verification Criteria" workflow
3. View the latest run logs for detailed assessment results

**Upgrading to Verified:**
1. Ensure your asset meets all requirements in LISTING.md
2. Check the verification workflow logs for your asset
3. Submit a PR updating `osmosis_verified` from `false` to `true`
4. Maintainers will review against criteria before approval

## Contributing

Contributions are welcome! Please ensure:
- Changes follow the documented structure and requirements
- All required fields are present and valid
- References to Chain Registry data are accurate
- PRs include clear descriptions of changes

For questions or issues, please open a GitHub issue or reach out in the Osmosis Discord.
